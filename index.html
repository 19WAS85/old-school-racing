<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>old-school-racing by wagnerandrade</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>

    <h1>Old School Racing</h1>

    <p>A pseudo3d old school racing game made with pure Javascript.</p>

    <p>
      Please, <a href="http://github.com/wagnerandrade/old-school-racing">check the repository</a> to download the code and contribute.<br/>
      This is a demo version with a random generated track and seven cpu cars (with a really dumb intelligence).<br/>
      Control the car with you keyboard:<br/>
      <strong>A</strong> - Gas, <strong>Z</strong> - Brake and <strong>Left</strong> and <strong>Right</strong> arrow - Steering
    </p>

    <p>Made by Wagner Andrade (<a href="http://wagnerandrade.com">http://wagnerandrade.com</a>)</p>

    <script src="http://github.com/wagnerandrade/old-school-racing/releases/download/0.0.1/old-school-racing.js"></script>
    <script type="text/javascript">

      var track = new Track('Test Track');

      track.addSegments(2, { color: 0xEEEEEE });

      while (track.length < 10000) {
        var length = Math.round(Math.random() * 30) + 20;
        var curve = Math.random() * 1 - 0.5;
        var hill = Math.random() * 0.5 - 0.25;
        track.addSegments(length, { curve: curve, hill: hill });
      }

      for (var i = 0; i < 100; i++) {
        var index = Math.round(Math.random() * track.segments.length);
        var positionMod = Math.random() * 500;
        var side = i % 2 == 0 ? -1 : 1;
        track.addObject(index, 'assets/tree.png', (700 + positionMod) * side);
      }

      var cars = [new Car('assets/sidewinder.png')];

      for (var i = 0; i < 7; i++) {
        var engineVariation = Math.random() * 0.5 - 0.25;
        var car = new Car('assets/sidewinder.png', { engine: 0.5 + engineVariation });
        car.position.x = Math.random() * 50 - 25;
        cars.push(car);
        new BasicCPUControl(car);
      }

      var race = new Race(track, cars); //, cars[1]);
      var render = new RaceRender(race);
      var keyboard = new KeyboardControl(cars[0]);

    </script>

    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>

    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-3808122-3");
        pageTracker._trackPageview();
      } catch (err) { }
    </script>

  </body>
</html>
